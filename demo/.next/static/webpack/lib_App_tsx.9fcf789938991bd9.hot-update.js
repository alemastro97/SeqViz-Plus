"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("lib_App_tsx",{

/***/ "../src/SelectionHandler.tsx":
/*!***********************************!*\
  !*** ../src/SelectionHandler.tsx ***!
  \***********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ SelectionHandler; }\n/* harmony export */ });\n/* harmony import */ var _swc_helpers_src_class_call_check_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @swc/helpers/src/_class_call_check.mjs */ \"./node_modules/@swc/helpers/src/_class_call_check.mjs\");\n/* harmony import */ var _swc_helpers_src_inherits_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @swc/helpers/src/_inherits.mjs */ \"./node_modules/@swc/helpers/src/_inherits.mjs\");\n/* harmony import */ var _swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @swc/helpers/src/_object_spread.mjs */ \"./node_modules/@swc/helpers/src/_object_spread.mjs\");\n/* harmony import */ var _swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @swc/helpers/src/_object_spread_props.mjs */ \"./node_modules/@swc/helpers/src/_object_spread_props.mjs\");\n/* harmony import */ var _swc_helpers_src_create_super_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @swc/helpers/src/_create_super.mjs */ \"./node_modules/@swc/helpers/src/_create_super.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _selectionContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./selectionContext */ \"../src/selectionContext.ts\");\n\n\n\n\n\n\n\nvar _PureComponent;\nvar SelectionHandler = /*#__PURE__*/ function(_superClass) {\n    \"use strict\";\n    (0,_swc_helpers_src_inherits_mjs__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(SelectionHandler, _superClass);\n    var _super = (0,_swc_helpers_src_create_super_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(SelectionHandler);\n    function SelectionHandler() {\n        (0,_swc_helpers_src_class_call_check_mjs__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(this, SelectionHandler);\n        var _this;\n        _this = _super.apply(this, arguments);\n        /** Only state is the selection range */ _this.state = (0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, _selectionContext__WEBPACK_IMPORTED_MODULE_1__.defaultSelection);\n        /* previous base cursor is over, used in circular drag select */ _this.previousBase = null;\n        /* directionality of drag (true if clockwise), used in circular drag select */ _this.forward = null;\n        /* full selection length, used in circular drag select */ _this.fullSelectionLength = 0;\n        /* is the user currently dragging across the surface of the seqViewer? this is tracked on SeqBlocks in particular (onMouseOver), used in circular drag select */ _this.dragEvent = false;\n        /* is there a selection already, used for shift-click catch up */ _this.selectionStarted = false;\n        /* was the last selection action a shift click, used for shift-click catch up */ _this.shiftSelection = false;\n        /* unix time of the last click (awful attempt at detecting double clicks) */ _this.lastClick = Date.now();\n        /** a map between the id of child elements and their associated SelectRanges */ _this.idToRange = new Map();\n        _this.componentDidMount = function() {\n            if (!document) return;\n            document.addEventListener(\"mouseup\", _this.stopDrag);\n        };\n        _this.componentWillUnmount = function() {\n            if (!document) return;\n            document.removeEventListener(\"mouseup\", _this.stopDrag);\n        };\n        /** Stop the current drag event from happening */ _this.stopDrag = function() {\n            _this.dragEvent = false;\n        };\n        /**\n   * Called at start of drag to make sure checkers are reset to default state\n   */ _this.resetCircleDragVars = function(start) {\n            _this.previousBase = start;\n            _this.forward = null;\n            _this.fullSelectionLength = 0;\n            _this.dragEvent = true; // start a drag event\n        };\n        /**\n   * a ref callback for mapping the id of child to its SelectRange\n   * it stores the id of all elements\n   **/ _this.inputRef = function(ref, selectRange) {\n            _this.idToRange.set(ref, (0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({\n                ref: ref\n            }, selectRange));\n        };\n        /**\n   * remove the ref by ID.\n   */ _this.removeMountedBlock = function(ref) {\n            _this.idToRange.delete(ref);\n        };\n        /**\n   * the selected child element is something that is known by reference.\n   * update its SeqBlock's range (or any others affected) with the newly\n   * active range\n   */ _this.mouseEvent = function(e) {\n            var setCentralIndex = _this.props.setCentralIndex;\n            // should not be updating selection since it's not a drag event time\n            if ((e.type === \"mousemove\" || e.type === \"mouseup\") && !_this.dragEvent) {\n                return;\n            }\n            // storing this to figure out if it was a double click\n            var msSinceLastClick = Date.now() - _this.lastClick;\n            var knownRange = _this.dragEvent ? _this.idToRange.get(e.currentTarget.id) // only look for SeqBlocks\n             : _this.idToRange.get(e.target.id) || _this.idToRange.get(e.currentTarget.id); // elements and SeqBlocks\n            if (!knownRange) {\n                return; // there isn't a known range with the id of the element\n            }\n            knownRange = (0,_swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, knownRange), {\n                end: knownRange.end || 0,\n                start: knownRange.start || 0\n            });\n            var direction = knownRange.direction, end = knownRange.end, start = knownRange.start, viewer = knownRange.viewer;\n            switch(knownRange.type){\n                case \"ANNOTATION\":\n                case \"FIND\":\n                case \"TRANSLATION\":\n                case \"ENZYME\":\n                case \"HIGHLIGHT\":\n                    {\n                        if (viewer !== \"LINEAR\" && setCentralIndex) {\n                            // if an element was clicked on the circular viewer, scroll the linear\n                            // viewer so the element starts on the first SeqBlock\n                            setCentralIndex(\"LINEAR\", start || 0);\n                        }\n                        // Annotation or find selection range\n                        var clockwise = direction ? direction === 1 : true;\n                        var selectionStart = clockwise ? start : end;\n                        var selectionEnd = clockwise ? end : start;\n                        _this.setSelection((0,_swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, knownRange), {\n                            clockwise: clockwise,\n                            end: selectionEnd,\n                            start: selectionStart\n                        }));\n                        _this.dragEvent = false;\n                        _this.lastClick = Date.now();\n                        break;\n                    }\n                case \"AMINOACID\":\n                    {\n                        // Annotation or find selection range\n                        var clockwise1 = direction ? direction === 1 : true;\n                        var selectionStart1 = clockwise1 ? start : end;\n                        var selectionEnd1 = clockwise1 ? end : start;\n                        // if they double clicked, select the whole translation\n                        // https://en.wikipedia.org/wiki/Double-click#Speed_and_timing\n                        if (msSinceLastClick < 300 && knownRange.parent) {\n                            knownRange = (0,_swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, knownRange.parent), {\n                                end: knownRange.parent.end || 0,\n                                start: knownRange.parent.start || 0\n                            });\n                            selectionStart1 = clockwise1 ? knownRange.start : knownRange.end;\n                            selectionEnd1 = clockwise1 ? knownRange.end : knownRange.start;\n                        }\n                        _this.setSelection((0,_swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, knownRange), {\n                            clockwise: clockwise1,\n                            end: selectionEnd1,\n                            start: selectionStart1\n                        }));\n                        _this.dragEvent = false;\n                        _this.lastClick = Date.now();\n                        e.stopPropagation(); // necessary to stop a double click\n                        break;\n                    }\n                case \"SEQ\":\n                    {\n                        if (viewer === \"LINEAR\") {\n                            _this.handleLinearSeqEvent(e, (0,_swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, knownRange), {\n                                end: knownRange.end || 0,\n                                start: knownRange.start || 0\n                            }));\n                        } else if (viewer === \"CIRCULAR\") {\n                            _this.handleCircularSeqEvent(e);\n                        }\n                        break;\n                    }\n                default:\n            }\n        };\n        /**\n   * Handle a sequence selection on a linear viewer\n   */ _this.handleLinearSeqEvent = function(e, knownRange) {\n            var selection = _this.context;\n            var currBase = _this.calculateBaseLinear(e, knownRange);\n            var clockwiseDrag = selection.start !== null && currBase >= (selection.start || 0);\n            if (e.button === 0 && e.type === \"mousedown\" && currBase !== null) {\n                // this is the start of a drag event\n                _this.setSelection((0,_swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, _selectionContext__WEBPACK_IMPORTED_MODULE_1__.defaultSelection), {\n                    clockwise: clockwiseDrag,\n                    end: currBase,\n                    start: e.shiftKey ? selection.start : currBase\n                }));\n                _this.dragEvent = true;\n            } else if (e.button === 0 && _this.dragEvent && currBase !== null) {\n                // continue a drag event that's currently happening\n                _this.setSelection((0,_swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, _selectionContext__WEBPACK_IMPORTED_MODULE_1__.defaultSelection), {\n                    clockwise: clockwiseDrag,\n                    end: currBase,\n                    start: selection.start\n                }));\n            }\n        };\n        /**\n   * Handle a sequence selection event on the circular viewer\n   */ _this.handleCircularSeqEvent = function(e) {\n            var seq = _this.props.seq;\n            var selection = _this.context;\n            var start = selection.start;\n            var clockwise = selection.clockwise, end = selection.end;\n            var currBase = _this.calculateBaseCircular(e);\n            var seqLength = seq.length;\n            if (e.type === \"mousedown\") {\n                var selStart = e.shiftKey ? start || 0 : currBase;\n                var lookahead = e.shiftKey ? _this.calcSelectionLength(selStart, currBase, false) : _this.calcSelectionLength(selStart, currBase, true); // check clockwise selection length\n                _this.selectionStarted = lookahead > 0; // update check for whether there is a prior selection\n                _this.resetCircleDragVars(selStart); // begin drag event\n                _this.setSelection((0,_swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, _selectionContext__WEBPACK_IMPORTED_MODULE_1__.defaultSelection), {\n                    clockwise: clockwise,\n                    end: currBase,\n                    ref: \"\",\n                    start: selStart,\n                    type: \"SEQ\"\n                }));\n            } else if (e.type === \"mousemove\" && _this.dragEvent && currBase && _this.previousBase && currBase !== _this.previousBase) {\n                var increased = currBase > _this.previousBase; // bases increased\n                var changeThreshold = seqLength * 0.9; // threshold for unrealistic change by mouse movement\n                var change = Math.abs(_this.previousBase - currBase); // index change from this mouse movement\n                var crossedZero = change > changeThreshold; // zero was crossed if base jumped more than changeThreshold\n                _this.forward = increased ? !crossedZero : crossedZero; // bases increased XOR crossed zero\n                var lengthChange = crossedZero ? seqLength - change : change; // the change at the point where we cross zero has to be normalized by seqLength\n                var sameDirectionMove = _this.forward === selection.clockwise || selection.clockwise === null; // moving in same direction as start of drag or start of drag\n                if (sameDirectionMove) {\n                    _this.fullSelectionLength += lengthChange;\n                } else {\n                    _this.fullSelectionLength -= lengthChange;\n                }\n                _this.previousBase = currBase; // done comparing with previous base, update previous base\n                if (_this.fullSelectionLength < seqLength * 0.01 && !_this.shiftSelection) {\n                    clockwise = _this.forward; // near selection start so selection direction is up for grabs\n                    var check = _this.calcSelectionLength(selection.start || 0, currBase, _this.forward); // check actual current selection length\n                    if (_this.fullSelectionLength < 0) {\n                        // This is to correct for errors when dragging too fast\n                        _this.fullSelectionLength = check;\n                    }\n                    if (check > _this.fullSelectionLength) {\n                        // the actual selection length being greater than additive selection\n                        // length means we have come back to start and want to go in opposite direction\n                        clockwise = !_this.forward;\n                    }\n                    end = currBase;\n                }\n                sameDirectionMove = _this.forward === selection.clockwise; // recalculate this in case we've switched selection directionality\n                // check the selection length, this is agnostic to the ALL reference and\n                // will always calculate from where you cursor is to the start of selection\n                var check1 = _this.calcSelectionLength(selection.start || 0, currBase, selection.clockwise || true);\n                if (_this.selectionStarted && _this.shiftSelection && check1 > _this.fullSelectionLength) {\n                    _this.fullSelectionLength = check1; // shift select catch up\n                }\n                // there is an ongoing drag in the same direction as the direction the selection started in\n                var sameDirectionDrag = _this.dragEvent && sameDirectionMove;\n                var fullSelection = false; // selection is full sequence\n                // TODO: fix const fullSelection = currRef === \"ALL\"; // selection is full sequence\n                var hitFullSelection = !fullSelection && _this.fullSelectionLength >= seqLength; // selection became full sequence\n                if (sameDirectionDrag && hitFullSelection) {\n                    end = start;\n                } else if (fullSelection) {\n                    // this ensures that backtracking doesn't require making up to your overshoot forward circles\n                    _this.fullSelectionLength = seqLength + _this.fullSelectionLength % seqLength;\n                    if (!sameDirectionDrag && // changed direction\n                    check1 === _this.fullSelectionLength - seqLength && // back tracking\n                    check1 > seqLength * 0.9 // passed selection start\n                    ) {\n                        end = currBase; // start decreasing selection size due to backtracking\n                        // reset calculated additive selection length to normal now that we are not at ALL length\n                        _this.fullSelectionLength = _this.fullSelectionLength - seqLength;\n                    }\n                } else {\n                    end = currBase; // nothing special just update the selection\n                }\n                _this.shiftSelection = false;\n                _this.setSelection((0,_swc_helpers_src_object_spread_props_mjs__WEBPACK_IMPORTED_MODULE_6__[\"default\"])((0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, _selectionContext__WEBPACK_IMPORTED_MODULE_1__.defaultSelection), {\n                    clockwise: clockwise,\n                    end: end,\n                    start: start,\n                    type: \"SEQ\"\n                }));\n            }\n        };\n        /**\n   * in a linear sequence viewer, given the bounding box of a component, the basepairs\n   * by SeqBlock and the position of the mouse event, find the current base\n   */ _this.calculateBaseLinear = function(e, knownRange) {\n            var bpsPerBlock = _this.props.bpsPerBlock;\n            var block = e.currentTarget.getBoundingClientRect();\n            var distFromLeft = e.clientX - block.left;\n            var ratioFromLeft = distFromLeft / block.width;\n            var bpsFromLeft = Math.round(ratioFromLeft * bpsPerBlock);\n            return Math.min(knownRange.start + bpsFromLeft, knownRange.end);\n        };\n        /**\n   * in a circular plasmid viewer, given the center of the viewer, and position of the\n   * mouse event, find the currently hovered or clicked basepair\n   */ _this.calculateBaseCircular = function(e) {\n            var _props = _this.props, center = _props.center, centralIndex = _props.centralIndex, seq = _props.seq, yDiff = _props.yDiff;\n            if (!center) return 0;\n            var block = e.currentTarget.getBoundingClientRect();\n            // position on the plasmid viewer\n            var distFromLeft = e.clientX - block.left;\n            var distFromTop = e.clientY - block.top;\n            // position relative to center\n            var x = distFromLeft - center.x;\n            var y = distFromTop - (center.y + yDiff);\n            var riseToRun = y / x;\n            var posInRads = Math.atan(riseToRun);\n            var posInDeg = posInRads * (180 / Math.PI) + 90; // convert and shift to vertical is 0\n            if (x < 0) {\n                posInDeg += 180; // left half of the viewer\n            }\n            var posInPerc = posInDeg / 360; // position as a percentage\n            var currBase = Math.round(seq.length * posInPerc); // account for rotation of the viewer\n            currBase += centralIndex;\n            if (currBase > seq.length) {\n                currBase -= seq.length;\n            }\n            return currBase;\n        };\n        /**\n   * Update the selection in state. Only update the specified\n   * properties of the selection that should be updated.\n   */ _this.setSelection = function(newSelection) {\n            var selection = _this.context;\n            var setSelection = _this.props.setSelection;\n            if (newSelection.start === selection.start && newSelection.end === selection.end && newSelection.ref === selection.ref && // to support re-clicking the annotation and causing it to fire a la gh issue https://github.com/Lattice-Automation/seqviz/issues/142\n            [\n                \"SEQ\",\n                \"AMINOACID\",\n                \"\"\n            ].includes(newSelection.type || \"\")) {\n                return;\n            }\n            var ref = (0,_swc_helpers_src_object_spread_mjs__WEBPACK_IMPORTED_MODULE_5__[\"default\"])({}, selection, newSelection), clockwise = ref.clockwise, end = ref.end, name = ref.name, ref1 = ref.ref, start = ref.start, type = ref.type;\n            var length = _this.calcSelectionLength(start, end, clockwise);\n            setSelection({\n                clockwise: clockwise,\n                end: end,\n                length: length,\n                name: name,\n                ref: ref1,\n                start: start,\n                type: type\n            });\n        };\n        /**\n   * Check what the length of the selection is in circle drag select\n   */ _this.calcSelectionLength = function(start, base, clock) {\n            var seq = _this.props.seq;\n            if (base < start && !clock) {\n                return start - base;\n            }\n            if (base > start && !clock) {\n                return start + (seq.length - base);\n            }\n            if (base > start && clock) {\n                return base - start;\n            }\n            if (base < start && clock) {\n                return seq.length - start + base;\n            }\n            return 0;\n        };\n        return _this;\n    }\n    var _proto = SelectionHandler.prototype;\n    _proto.render = function render() {\n        return this.props.children(this.inputRef, this.mouseEvent, this.removeMountedBlock);\n    };\n    return SelectionHandler;\n}(_PureComponent = react__WEBPACK_IMPORTED_MODULE_0__.PureComponent);\nSelectionHandler.displayName = \"WithSelectionHandler\";\nSelectionHandler.contextType = _selectionContext__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n/**\n * SelectionHandler handles sequence selection. Each click, drag, etc, is\n * noted and mapped to a sequence index.\n */ \n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevExports = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevExports) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports on update so we can compare the boundary\n                // signatures.\n                module.hot.dispose(function (data) {\n                    data.prevExports = currentExports;\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevExports !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevExports, currentExports)) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevExports !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFO2dCQUN6QixPQUFPRCxJQUFJLEdBQUduRixLQUFLLENBQUM7WUFDdEIsQ0FBQztZQUNELElBQUltRixJQUFJLEdBQUduRixLQUFLLElBQUlvRixLQUFLLEVBQUU7Z0JBQ3pCLE9BQU9oRCxHQUFHLENBQUNHLE1BQU0sR0FBR3ZDLEtBQUssR0FBR21GLElBQUksQ0FBQztZQUNuQyxDQUFDO1lBQ0QsT0FBTyxDQUFDLENBQUM7UUFDWCxDQUFDLENBQUM7OztpQkE3WmlCdkcsZ0JBQWdCO0lBK1puQ3lHLE9BQUFBLE1BQU0sR0FBTkEsU0FBQUEsTUFBTSxHQUFHO1FBQ1AsT0FBTyxJQUFJLENBQUMzRSxLQUFLLENBQUM0RSxRQUFRLENBQUMsSUFBSSxDQUFDckYsUUFBUSxFQUFFLElBQUksQ0FBQ00sVUFBVSxFQUFFLElBQUksQ0FBQ0Ysa0JBQWtCLENBQUMsQ0FBQztJQUN0RixDQUFDO1dBamFrQnpCLGdCQUFnQjtDQWthcEMsQ0FsYTZDSCxjQUFtQixHQUFuQkEsZ0RBQW1CLENBa2FoRTtBQWphQyxnQkFEbUMsQ0FDNUIrRyxXQUFXLEdBQUcsc0JBQXNCO0FBRTNDLGdCQUhtQyxDQUc1QkMsV0FBVyxHQUFHL0cseURBQWdCO0FBUHZDOzs7Q0FHQyxHQW1hQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vc3JjL1NlbGVjdGlvbkhhbmRsZXIudHN4PzM2YWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5cbmltcG9ydCBTZWxlY3Rpb25Db250ZXh0LCB7IFNlbGVjdGlvbiwgZGVmYXVsdFNlbGVjdGlvbiB9IGZyb20gXCIuL3NlbGVjdGlvbkNvbnRleHRcIjtcblxuaW50ZXJmYWNlIFJlZlNlbGVjdGlvbiBleHRlbmRzIFNlbGVjdGlvbiB7XG4gIHZpZXdlcjogXCJMSU5FQVJcIiB8IFwiQ0lSQ1VMQVJcIjtcbn1cblxuZXhwb3J0IHR5cGUgSW5wdXRSZWZGdW5jID0gKGlkOiBzdHJpbmcsIHJlZjogUmVmU2VsZWN0aW9uKSA9PiBhbnk7XG5cbmV4cG9ydCB0eXBlIFNlcVZpek1vdXNlRXZlbnQgPSBSZWFjdC5Nb3VzZUV2ZW50ICYge1xuICB0YXJnZXQ6IHsgaWQ6IHN0cmluZyB9O1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBTZWxlY3Rpb25IYW5kbGVyUHJvcHMge1xuICBicHNQZXJCbG9jazogbnVtYmVyO1xuICBjZW50ZXI6IHsgeDogbnVtYmVyOyB5OiBudW1iZXIgfTtcbiAgY2VudHJhbEluZGV4OiBudW1iZXI7XG4gIGNoaWxkcmVuOiAoXG4gICAgaW5wdXRSZWY6IElucHV0UmVmRnVuYyxcbiAgICBoYW5kbGVNb3VzZUV2ZW50OiAoZTogU2VxVml6TW91c2VFdmVudCkgPT4gdm9pZCxcbiAgICBvblVubW91bnQ6IChyZWY6IHN0cmluZykgPT4gdm9pZFxuICApID0+IFJlYWN0LlJlYWN0Tm9kZTtcbiAgc2VxOiBzdHJpbmc7XG4gIHNldENlbnRyYWxJbmRleDogKHZpZXdlcjogXCJMSU5FQVJcIiB8IFwiQ0lSQ1VMQVJcIiwgaW5kZXg6IG51bWJlcikgPT4gdm9pZDtcbiAgc2V0U2VsZWN0aW9uOiAoc2VsZWN0aW9uOiBTZWxlY3Rpb24pID0+IHZvaWQ7XG4gIHlEaWZmOiBudW1iZXI7XG59XG5cbi8qKlxuICogU2VsZWN0aW9uSGFuZGxlciBoYW5kbGVzIHNlcXVlbmNlIHNlbGVjdGlvbi4gRWFjaCBjbGljaywgZHJhZywgZXRjLCBpc1xuICogbm90ZWQgYW5kIG1hcHBlZCB0byBhIHNlcXVlbmNlIGluZGV4LlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3Rpb25IYW5kbGVyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxTZWxlY3Rpb25IYW5kbGVyUHJvcHM+IHtcbiAgc3RhdGljIGRpc3BsYXlOYW1lID0gXCJXaXRoU2VsZWN0aW9uSGFuZGxlclwiO1xuXG4gIHN0YXRpYyBjb250ZXh0VHlwZSA9IFNlbGVjdGlvbkNvbnRleHQ7XG4gIHN0YXRpYyBjb250ZXh0OiBSZWFjdC5Db250ZXh0VHlwZTx0eXBlb2YgU2VsZWN0aW9uQ29udGV4dD47XG4gIGRlY2xhcmUgY29udGV4dDogUmVhY3QuQ29udGV4dFR5cGU8dHlwZW9mIFNlbGVjdGlvbkNvbnRleHQ+O1xuXG4gIC8qKiBPbmx5IHN0YXRlIGlzIHRoZSBzZWxlY3Rpb24gcmFuZ2UgKi9cbiAgc3RhdGUgPSB7IC4uLmRlZmF1bHRTZWxlY3Rpb24gfTtcblxuICAvKiBwcmV2aW91cyBiYXNlIGN1cnNvciBpcyBvdmVyLCB1c2VkIGluIGNpcmN1bGFyIGRyYWcgc2VsZWN0ICovXG4gIHByZXZpb3VzQmFzZTogbnVsbCB8IG51bWJlciA9IG51bGw7XG5cbiAgLyogZGlyZWN0aW9uYWxpdHkgb2YgZHJhZyAodHJ1ZSBpZiBjbG9ja3dpc2UpLCB1c2VkIGluIGNpcmN1bGFyIGRyYWcgc2VsZWN0ICovXG4gIGZvcndhcmQ6IG51bGwgfCBib29sZWFuID0gbnVsbDtcblxuICAvKiBmdWxsIHNlbGVjdGlvbiBsZW5ndGgsIHVzZWQgaW4gY2lyY3VsYXIgZHJhZyBzZWxlY3QgKi9cbiAgZnVsbFNlbGVjdGlvbkxlbmd0aCA9IDA7XG5cbiAgLyogaXMgdGhlIHVzZXIgY3VycmVudGx5IGRyYWdnaW5nIGFjcm9zcyB0aGUgc3VyZmFjZSBvZiB0aGUgc2VxVmlld2VyPyB0aGlzIGlzIHRyYWNrZWQgb24gU2VxQmxvY2tzIGluIHBhcnRpY3VsYXIgKG9uTW91c2VPdmVyKSwgdXNlZCBpbiBjaXJjdWxhciBkcmFnIHNlbGVjdCAqL1xuICBkcmFnRXZlbnQgPSBmYWxzZTtcblxuICAvKiBpcyB0aGVyZSBhIHNlbGVjdGlvbiBhbHJlYWR5LCB1c2VkIGZvciBzaGlmdC1jbGljayBjYXRjaCB1cCAqL1xuICBzZWxlY3Rpb25TdGFydGVkID0gZmFsc2U7XG5cbiAgLyogd2FzIHRoZSBsYXN0IHNlbGVjdGlvbiBhY3Rpb24gYSBzaGlmdCBjbGljaywgdXNlZCBmb3Igc2hpZnQtY2xpY2sgY2F0Y2ggdXAgKi9cbiAgc2hpZnRTZWxlY3Rpb24gPSBmYWxzZTtcblxuICAvKiB1bml4IHRpbWUgb2YgdGhlIGxhc3QgY2xpY2sgKGF3ZnVsIGF0dGVtcHQgYXQgZGV0ZWN0aW5nIGRvdWJsZSBjbGlja3MpICovXG4gIGxhc3RDbGljayA9IERhdGUubm93KCk7XG5cbiAgLyoqIGEgbWFwIGJldHdlZW4gdGhlIGlkIG9mIGNoaWxkIGVsZW1lbnRzIGFuZCB0aGVpciBhc3NvY2lhdGVkIFNlbGVjdFJhbmdlcyAqL1xuICBpZFRvUmFuZ2UgPSBuZXcgTWFwPHN0cmluZywgU2VsZWN0aW9uPigpO1xuXG4gIGNvbXBvbmVudERpZE1vdW50ID0gKCkgPT4ge1xuICAgIGlmICghZG9jdW1lbnQpIHJldHVybjtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLnN0b3BEcmFnKTtcbiAgfTtcblxuICBjb21wb25lbnRXaWxsVW5tb3VudCA9ICgpID0+IHtcbiAgICBpZiAoIWRvY3VtZW50KSByZXR1cm47XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5zdG9wRHJhZyk7XG4gIH07XG5cbiAgLyoqIFN0b3AgdGhlIGN1cnJlbnQgZHJhZyBldmVudCBmcm9tIGhhcHBlbmluZyAqL1xuICBzdG9wRHJhZyA9ICgpID0+IHtcbiAgICB0aGlzLmRyYWdFdmVudCA9IGZhbHNlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsZWQgYXQgc3RhcnQgb2YgZHJhZyB0byBtYWtlIHN1cmUgY2hlY2tlcnMgYXJlIHJlc2V0IHRvIGRlZmF1bHQgc3RhdGVcbiAgICovXG4gIHJlc2V0Q2lyY2xlRHJhZ1ZhcnMgPSAoc3RhcnQ6IG51bGwgfCBudW1iZXIpID0+IHtcbiAgICB0aGlzLnByZXZpb3VzQmFzZSA9IHN0YXJ0O1xuICAgIHRoaXMuZm9yd2FyZCA9IG51bGw7XG4gICAgdGhpcy5mdWxsU2VsZWN0aW9uTGVuZ3RoID0gMDtcbiAgICB0aGlzLmRyYWdFdmVudCA9IHRydWU7IC8vIHN0YXJ0IGEgZHJhZyBldmVudFxuICB9O1xuXG4gIC8qKlxuICAgKiBhIHJlZiBjYWxsYmFjayBmb3IgbWFwcGluZyB0aGUgaWQgb2YgY2hpbGQgdG8gaXRzIFNlbGVjdFJhbmdlXG4gICAqIGl0IHN0b3JlcyB0aGUgaWQgb2YgYWxsIGVsZW1lbnRzXG4gICAqKi9cbiAgaW5wdXRSZWYgPSAocmVmOiBzdHJpbmcsIHNlbGVjdFJhbmdlOiBTZWxlY3Rpb24pID0+IHtcbiAgICB0aGlzLmlkVG9SYW5nZS5zZXQocmVmLCB7IHJlZiwgLi4uc2VsZWN0UmFuZ2UgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIHJlbW92ZSB0aGUgcmVmIGJ5IElELlxuICAgKi9cbiAgcmVtb3ZlTW91bnRlZEJsb2NrID0gKHJlZjogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5pZFRvUmFuZ2UuZGVsZXRlKHJlZik7XG4gIH07XG5cbiAgLyoqXG4gICAqIHRoZSBzZWxlY3RlZCBjaGlsZCBlbGVtZW50IGlzIHNvbWV0aGluZyB0aGF0IGlzIGtub3duIGJ5IHJlZmVyZW5jZS5cbiAgICogdXBkYXRlIGl0cyBTZXFCbG9jaydzIHJhbmdlIChvciBhbnkgb3RoZXJzIGFmZmVjdGVkKSB3aXRoIHRoZSBuZXdseVxuICAgKiBhY3RpdmUgcmFuZ2VcbiAgICovXG4gIG1vdXNlRXZlbnQgPSAoZTogU2VxVml6TW91c2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IHsgc2V0Q2VudHJhbEluZGV4IH0gPSB0aGlzLnByb3BzO1xuXG4gICAgLy8gc2hvdWxkIG5vdCBiZSB1cGRhdGluZyBzZWxlY3Rpb24gc2luY2UgaXQncyBub3QgYSBkcmFnIGV2ZW50IHRpbWVcbiAgICBpZiAoKGUudHlwZSA9PT0gXCJtb3VzZW1vdmVcIiB8fCBlLnR5cGUgPT09IFwibW91c2V1cFwiKSAmJiAhdGhpcy5kcmFnRXZlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBzdG9yaW5nIHRoaXMgdG8gZmlndXJlIG91dCBpZiBpdCB3YXMgYSBkb3VibGUgY2xpY2tcbiAgICBjb25zdCBtc1NpbmNlTGFzdENsaWNrID0gRGF0ZS5ub3coKSAtIHRoaXMubGFzdENsaWNrO1xuXG4gICAgbGV0IGtub3duUmFuZ2UgPSB0aGlzLmRyYWdFdmVudFxuICAgICAgPyB0aGlzLmlkVG9SYW5nZS5nZXQoZS5jdXJyZW50VGFyZ2V0LmlkKSAvLyBvbmx5IGxvb2sgZm9yIFNlcUJsb2Nrc1xuICAgICAgOiB0aGlzLmlkVG9SYW5nZS5nZXQoZS50YXJnZXQuaWQpIHx8IHRoaXMuaWRUb1JhbmdlLmdldChlLmN1cnJlbnRUYXJnZXQuaWQpOyAvLyBlbGVtZW50cyBhbmQgU2VxQmxvY2tzXG4gICAgaWYgKCFrbm93blJhbmdlKSB7XG4gICAgICByZXR1cm47IC8vIHRoZXJlIGlzbid0IGEga25vd24gcmFuZ2Ugd2l0aCB0aGUgaWQgb2YgdGhlIGVsZW1lbnRcbiAgICB9XG4gICAga25vd25SYW5nZSA9IHsgLi4ua25vd25SYW5nZSwgZW5kOiBrbm93blJhbmdlLmVuZCB8fCAwLCBzdGFydDoga25vd25SYW5nZS5zdGFydCB8fCAwIH07XG5cbiAgICBjb25zdCB7IGRpcmVjdGlvbiwgZW5kLCBzdGFydCwgdmlld2VyIH0gPSBrbm93blJhbmdlO1xuICAgIHN3aXRjaCAoa25vd25SYW5nZS50eXBlKSB7XG4gICAgICBjYXNlIFwiQU5OT1RBVElPTlwiOlxuICAgICAgY2FzZSBcIkZJTkRcIjpcbiAgICAgIGNhc2UgXCJUUkFOU0xBVElPTlwiOlxuICAgICAgY2FzZSBcIkVOWllNRVwiOlxuICAgICAgY2FzZSBcIkhJR0hMSUdIVFwiOiB7XG4gICAgICAgIGlmICh2aWV3ZXIgIT09IFwiTElORUFSXCIgJiYgc2V0Q2VudHJhbEluZGV4KSB7XG4gICAgICAgICAgLy8gaWYgYW4gZWxlbWVudCB3YXMgY2xpY2tlZCBvbiB0aGUgY2lyY3VsYXIgdmlld2VyLCBzY3JvbGwgdGhlIGxpbmVhclxuICAgICAgICAgIC8vIHZpZXdlciBzbyB0aGUgZWxlbWVudCBzdGFydHMgb24gdGhlIGZpcnN0IFNlcUJsb2NrXG4gICAgICAgICAgc2V0Q2VudHJhbEluZGV4KFwiTElORUFSXCIsIHN0YXJ0IHx8IDApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQW5ub3RhdGlvbiBvciBmaW5kIHNlbGVjdGlvbiByYW5nZVxuICAgICAgICBjb25zdCBjbG9ja3dpc2UgPSBkaXJlY3Rpb24gPyBkaXJlY3Rpb24gPT09IDEgOiB0cnVlO1xuICAgICAgICBjb25zdCBzZWxlY3Rpb25TdGFydCA9IGNsb2Nrd2lzZSA/IHN0YXJ0IDogZW5kO1xuICAgICAgICBjb25zdCBzZWxlY3Rpb25FbmQgPSBjbG9ja3dpc2UgPyBlbmQgOiBzdGFydDtcblxuICAgICAgICB0aGlzLnNldFNlbGVjdGlvbih7XG4gICAgICAgICAgLi4ua25vd25SYW5nZSxcbiAgICAgICAgICBjbG9ja3dpc2U6IGNsb2Nrd2lzZSxcbiAgICAgICAgICBlbmQ6IHNlbGVjdGlvbkVuZCxcbiAgICAgICAgICBzdGFydDogc2VsZWN0aW9uU3RhcnQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZHJhZ0V2ZW50ID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGFzdENsaWNrID0gRGF0ZS5ub3coKTtcblxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgXCJBTUlOT0FDSURcIjoge1xuICAgICAgICAvLyBBbm5vdGF0aW9uIG9yIGZpbmQgc2VsZWN0aW9uIHJhbmdlXG4gICAgICAgIGNvbnN0IGNsb2Nrd2lzZSA9IGRpcmVjdGlvbiA/IGRpcmVjdGlvbiA9PT0gMSA6IHRydWU7XG4gICAgICAgIGxldCBzZWxlY3Rpb25TdGFydCA9IGNsb2Nrd2lzZSA/IHN0YXJ0IDogZW5kO1xuICAgICAgICBsZXQgc2VsZWN0aW9uRW5kID0gY2xvY2t3aXNlID8gZW5kIDogc3RhcnQ7XG5cbiAgICAgICAgLy8gaWYgdGhleSBkb3VibGUgY2xpY2tlZCwgc2VsZWN0IHRoZSB3aG9sZSB0cmFuc2xhdGlvblxuICAgICAgICAvLyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Eb3VibGUtY2xpY2sjU3BlZWRfYW5kX3RpbWluZ1xuICAgICAgICBpZiAobXNTaW5jZUxhc3RDbGljayA8IDMwMCAmJiBrbm93blJhbmdlLnBhcmVudCkge1xuICAgICAgICAgIGtub3duUmFuZ2UgPSB7IC4uLmtub3duUmFuZ2UucGFyZW50LCBlbmQ6IGtub3duUmFuZ2UucGFyZW50LmVuZCB8fCAwLCBzdGFydDoga25vd25SYW5nZS5wYXJlbnQuc3RhcnQgfHwgMCB9O1xuICAgICAgICAgIHNlbGVjdGlvblN0YXJ0ID0gY2xvY2t3aXNlID8ga25vd25SYW5nZS5zdGFydCA6IGtub3duUmFuZ2UuZW5kO1xuICAgICAgICAgIHNlbGVjdGlvbkVuZCA9IGNsb2Nrd2lzZSA/IGtub3duUmFuZ2UuZW5kIDoga25vd25SYW5nZS5zdGFydDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKHtcbiAgICAgICAgICAuLi5rbm93blJhbmdlLFxuICAgICAgICAgIGNsb2Nrd2lzZTogY2xvY2t3aXNlLFxuICAgICAgICAgIGVuZDogc2VsZWN0aW9uRW5kLFxuICAgICAgICAgIHN0YXJ0OiBzZWxlY3Rpb25TdGFydCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5kcmFnRXZlbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sYXN0Q2xpY2sgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIG5lY2Vzc2FyeSB0byBzdG9wIGEgZG91YmxlIGNsaWNrXG5cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlIFwiU0VRXCI6IHtcbiAgICAgICAgaWYgKHZpZXdlciA9PT0gXCJMSU5FQVJcIikge1xuICAgICAgICAgIHRoaXMuaGFuZGxlTGluZWFyU2VxRXZlbnQoZSwgeyAuLi5rbm93blJhbmdlLCBlbmQ6IGtub3duUmFuZ2UuZW5kIHx8IDAsIHN0YXJ0OiBrbm93blJhbmdlLnN0YXJ0IHx8IDAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodmlld2VyID09PSBcIkNJUkNVTEFSXCIpIHtcbiAgICAgICAgICB0aGlzLmhhbmRsZUNpcmN1bGFyU2VxRXZlbnQoZSk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBzZXF1ZW5jZSBzZWxlY3Rpb24gb24gYSBsaW5lYXIgdmlld2VyXG4gICAqL1xuICBoYW5kbGVMaW5lYXJTZXFFdmVudCA9IChlOiBTZXFWaXpNb3VzZUV2ZW50LCBrbm93blJhbmdlOiB7IGVuZDogbnVtYmVyOyBzdGFydDogbnVtYmVyIH0pID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSB0aGlzLmNvbnRleHQ7XG5cbiAgICBjb25zdCBjdXJyQmFzZSA9IHRoaXMuY2FsY3VsYXRlQmFzZUxpbmVhcihlLCBrbm93blJhbmdlKTtcbiAgICBjb25zdCBjbG9ja3dpc2VEcmFnID0gc2VsZWN0aW9uLnN0YXJ0ICE9PSBudWxsICYmIGN1cnJCYXNlID49IChzZWxlY3Rpb24uc3RhcnQgfHwgMCk7XG5cbiAgICBpZiAoZS5idXR0b24gPT09IDAgJiYgZS50eXBlID09PSBcIm1vdXNlZG93blwiICYmIGN1cnJCYXNlICE9PSBudWxsKSB7XG4gICAgICAvLyB0aGlzIGlzIHRoZSBzdGFydCBvZiBhIGRyYWcgZXZlbnRcbiAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKHtcbiAgICAgICAgLi4uZGVmYXVsdFNlbGVjdGlvbixcbiAgICAgICAgY2xvY2t3aXNlOiBjbG9ja3dpc2VEcmFnLFxuICAgICAgICBlbmQ6IGN1cnJCYXNlLFxuICAgICAgICBzdGFydDogZS5zaGlmdEtleSA/IHNlbGVjdGlvbi5zdGFydCA6IGN1cnJCYXNlLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmRyYWdFdmVudCA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChlLmJ1dHRvbiA9PT0gMCAmJiB0aGlzLmRyYWdFdmVudCAmJiBjdXJyQmFzZSAhPT0gbnVsbCkge1xuICAgICAgLy8gY29udGludWUgYSBkcmFnIGV2ZW50IHRoYXQncyBjdXJyZW50bHkgaGFwcGVuaW5nXG4gICAgICB0aGlzLnNldFNlbGVjdGlvbih7XG4gICAgICAgIC4uLmRlZmF1bHRTZWxlY3Rpb24sXG4gICAgICAgIGNsb2Nrd2lzZTogY2xvY2t3aXNlRHJhZyxcbiAgICAgICAgZW5kOiBjdXJyQmFzZSxcbiAgICAgICAgc3RhcnQ6IHNlbGVjdGlvbi5zdGFydCxcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSGFuZGxlIGEgc2VxdWVuY2Ugc2VsZWN0aW9uIGV2ZW50IG9uIHRoZSBjaXJjdWxhciB2aWV3ZXJcbiAgICovXG4gIGhhbmRsZUNpcmN1bGFyU2VxRXZlbnQgPSAoZTogU2VxVml6TW91c2VFdmVudCkgPT4ge1xuICAgIGNvbnN0IHsgc2VxIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHNlbGVjdGlvbiA9IHRoaXMuY29udGV4dDtcblxuICAgIGNvbnN0IHsgc3RhcnQgfSA9IHNlbGVjdGlvbjtcbiAgICBsZXQgeyBjbG9ja3dpc2UsIGVuZCB9ID0gc2VsZWN0aW9uO1xuXG4gICAgY29uc3QgY3VyckJhc2UgPSB0aGlzLmNhbGN1bGF0ZUJhc2VDaXJjdWxhcihlKTtcbiAgICBjb25zdCBzZXFMZW5ndGggPSBzZXEubGVuZ3RoO1xuXG4gICAgaWYgKGUudHlwZSA9PT0gXCJtb3VzZWRvd25cIikge1xuICAgICAgY29uc3Qgc2VsU3RhcnQgPSBlLnNoaWZ0S2V5ID8gc3RhcnQgfHwgMCA6IGN1cnJCYXNlO1xuICAgICAgY29uc3QgbG9va2FoZWFkID0gZS5zaGlmdEtleVxuICAgICAgICA/IHRoaXMuY2FsY1NlbGVjdGlvbkxlbmd0aChzZWxTdGFydCwgY3VyckJhc2UsIGZhbHNlKVxuICAgICAgICA6IHRoaXMuY2FsY1NlbGVjdGlvbkxlbmd0aChzZWxTdGFydCwgY3VyckJhc2UsIHRydWUpOyAvLyBjaGVjayBjbG9ja3dpc2Ugc2VsZWN0aW9uIGxlbmd0aFxuICAgICAgdGhpcy5zZWxlY3Rpb25TdGFydGVkID0gbG9va2FoZWFkID4gMDsgLy8gdXBkYXRlIGNoZWNrIGZvciB3aGV0aGVyIHRoZXJlIGlzIGEgcHJpb3Igc2VsZWN0aW9uXG4gICAgICB0aGlzLnJlc2V0Q2lyY2xlRHJhZ1ZhcnMoc2VsU3RhcnQpOyAvLyBiZWdpbiBkcmFnIGV2ZW50XG5cbiAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKHtcbiAgICAgICAgLi4uZGVmYXVsdFNlbGVjdGlvbixcbiAgICAgICAgY2xvY2t3aXNlOiBjbG9ja3dpc2UsXG4gICAgICAgIGVuZDogY3VyckJhc2UsXG4gICAgICAgIHJlZjogXCJcIixcbiAgICAgICAgc3RhcnQ6IHNlbFN0YXJ0LFxuICAgICAgICB0eXBlOiBcIlNFUVwiLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGUudHlwZSA9PT0gXCJtb3VzZW1vdmVcIiAmJlxuICAgICAgdGhpcy5kcmFnRXZlbnQgJiZcbiAgICAgIGN1cnJCYXNlICYmXG4gICAgICB0aGlzLnByZXZpb3VzQmFzZSAmJlxuICAgICAgY3VyckJhc2UgIT09IHRoaXMucHJldmlvdXNCYXNlXG4gICAgKSB7XG4gICAgICBjb25zdCBpbmNyZWFzZWQgPSBjdXJyQmFzZSA+IHRoaXMucHJldmlvdXNCYXNlOyAvLyBiYXNlcyBpbmNyZWFzZWRcbiAgICAgIGNvbnN0IGNoYW5nZVRocmVzaG9sZCA9IHNlcUxlbmd0aCAqIDAuOTsgLy8gdGhyZXNob2xkIGZvciB1bnJlYWxpc3RpYyBjaGFuZ2UgYnkgbW91c2UgbW92ZW1lbnRcbiAgICAgIGNvbnN0IGNoYW5nZSA9IE1hdGguYWJzKHRoaXMucHJldmlvdXNCYXNlIC0gY3VyckJhc2UpOyAvLyBpbmRleCBjaGFuZ2UgZnJvbSB0aGlzIG1vdXNlIG1vdmVtZW50XG4gICAgICBjb25zdCBjcm9zc2VkWmVybyA9IGNoYW5nZSA+IGNoYW5nZVRocmVzaG9sZDsgLy8gemVybyB3YXMgY3Jvc3NlZCBpZiBiYXNlIGp1bXBlZCBtb3JlIHRoYW4gY2hhbmdlVGhyZXNob2xkXG4gICAgICB0aGlzLmZvcndhcmQgPSBpbmNyZWFzZWQgPyAhY3Jvc3NlZFplcm8gOiBjcm9zc2VkWmVybzsgLy8gYmFzZXMgaW5jcmVhc2VkIFhPUiBjcm9zc2VkIHplcm9cbiAgICAgIGNvbnN0IGxlbmd0aENoYW5nZSA9IGNyb3NzZWRaZXJvID8gc2VxTGVuZ3RoIC0gY2hhbmdlIDogY2hhbmdlOyAvLyB0aGUgY2hhbmdlIGF0IHRoZSBwb2ludCB3aGVyZSB3ZSBjcm9zcyB6ZXJvIGhhcyB0byBiZSBub3JtYWxpemVkIGJ5IHNlcUxlbmd0aFxuICAgICAgbGV0IHNhbWVEaXJlY3Rpb25Nb3ZlID0gdGhpcy5mb3J3YXJkID09PSBzZWxlY3Rpb24uY2xvY2t3aXNlIHx8IHNlbGVjdGlvbi5jbG9ja3dpc2UgPT09IG51bGw7IC8vIG1vdmluZyBpbiBzYW1lIGRpcmVjdGlvbiBhcyBzdGFydCBvZiBkcmFnIG9yIHN0YXJ0IG9mIGRyYWdcblxuICAgICAgaWYgKHNhbWVEaXJlY3Rpb25Nb3ZlKSB7XG4gICAgICAgIHRoaXMuZnVsbFNlbGVjdGlvbkxlbmd0aCArPSBsZW5ndGhDaGFuZ2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZ1bGxTZWxlY3Rpb25MZW5ndGggLT0gbGVuZ3RoQ2hhbmdlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnByZXZpb3VzQmFzZSA9IGN1cnJCYXNlOyAvLyBkb25lIGNvbXBhcmluZyB3aXRoIHByZXZpb3VzIGJhc2UsIHVwZGF0ZSBwcmV2aW91cyBiYXNlXG4gICAgICBpZiAodGhpcy5mdWxsU2VsZWN0aW9uTGVuZ3RoIDwgc2VxTGVuZ3RoICogMC4wMSAmJiAhdGhpcy5zaGlmdFNlbGVjdGlvbikge1xuICAgICAgICBjbG9ja3dpc2UgPSB0aGlzLmZvcndhcmQ7IC8vIG5lYXIgc2VsZWN0aW9uIHN0YXJ0IHNvIHNlbGVjdGlvbiBkaXJlY3Rpb24gaXMgdXAgZm9yIGdyYWJzXG4gICAgICAgIGNvbnN0IGNoZWNrID0gdGhpcy5jYWxjU2VsZWN0aW9uTGVuZ3RoKHNlbGVjdGlvbi5zdGFydCB8fCAwLCBjdXJyQmFzZSwgdGhpcy5mb3J3YXJkKTsgLy8gY2hlY2sgYWN0dWFsIGN1cnJlbnQgc2VsZWN0aW9uIGxlbmd0aFxuICAgICAgICBpZiAodGhpcy5mdWxsU2VsZWN0aW9uTGVuZ3RoIDwgMCkge1xuICAgICAgICAgIC8vIFRoaXMgaXMgdG8gY29ycmVjdCBmb3IgZXJyb3JzIHdoZW4gZHJhZ2dpbmcgdG9vIGZhc3RcbiAgICAgICAgICB0aGlzLmZ1bGxTZWxlY3Rpb25MZW5ndGggPSBjaGVjaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hlY2sgPiB0aGlzLmZ1bGxTZWxlY3Rpb25MZW5ndGgpIHtcbiAgICAgICAgICAvLyB0aGUgYWN0dWFsIHNlbGVjdGlvbiBsZW5ndGggYmVpbmcgZ3JlYXRlciB0aGFuIGFkZGl0aXZlIHNlbGVjdGlvblxuICAgICAgICAgIC8vIGxlbmd0aCBtZWFucyB3ZSBoYXZlIGNvbWUgYmFjayB0byBzdGFydCBhbmQgd2FudCB0byBnbyBpbiBvcHBvc2l0ZSBkaXJlY3Rpb25cbiAgICAgICAgICBjbG9ja3dpc2UgPSAhdGhpcy5mb3J3YXJkO1xuICAgICAgICB9XG4gICAgICAgIGVuZCA9IGN1cnJCYXNlO1xuICAgICAgfVxuICAgICAgc2FtZURpcmVjdGlvbk1vdmUgPSB0aGlzLmZvcndhcmQgPT09IHNlbGVjdGlvbi5jbG9ja3dpc2U7IC8vIHJlY2FsY3VsYXRlIHRoaXMgaW4gY2FzZSB3ZSd2ZSBzd2l0Y2hlZCBzZWxlY3Rpb24gZGlyZWN0aW9uYWxpdHlcblxuICAgICAgLy8gY2hlY2sgdGhlIHNlbGVjdGlvbiBsZW5ndGgsIHRoaXMgaXMgYWdub3N0aWMgdG8gdGhlIEFMTCByZWZlcmVuY2UgYW5kXG4gICAgICAvLyB3aWxsIGFsd2F5cyBjYWxjdWxhdGUgZnJvbSB3aGVyZSB5b3UgY3Vyc29yIGlzIHRvIHRoZSBzdGFydCBvZiBzZWxlY3Rpb25cbiAgICAgIGNvbnN0IGNoZWNrID0gdGhpcy5jYWxjU2VsZWN0aW9uTGVuZ3RoKHNlbGVjdGlvbi5zdGFydCB8fCAwLCBjdXJyQmFzZSwgc2VsZWN0aW9uLmNsb2Nrd2lzZSB8fCB0cnVlKTtcblxuICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uU3RhcnRlZCAmJiB0aGlzLnNoaWZ0U2VsZWN0aW9uICYmIGNoZWNrID4gdGhpcy5mdWxsU2VsZWN0aW9uTGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuZnVsbFNlbGVjdGlvbkxlbmd0aCA9IGNoZWNrOyAvLyBzaGlmdCBzZWxlY3QgY2F0Y2ggdXBcbiAgICAgIH1cblxuICAgICAgLy8gdGhlcmUgaXMgYW4gb25nb2luZyBkcmFnIGluIHRoZSBzYW1lIGRpcmVjdGlvbiBhcyB0aGUgZGlyZWN0aW9uIHRoZSBzZWxlY3Rpb24gc3RhcnRlZCBpblxuICAgICAgY29uc3Qgc2FtZURpcmVjdGlvbkRyYWcgPSB0aGlzLmRyYWdFdmVudCAmJiBzYW1lRGlyZWN0aW9uTW92ZTtcbiAgICAgIGNvbnN0IGZ1bGxTZWxlY3Rpb24gPSBmYWxzZTsgLy8gc2VsZWN0aW9uIGlzIGZ1bGwgc2VxdWVuY2VcblxuICAgICAgLy8gVE9ETzogZml4IGNvbnN0IGZ1bGxTZWxlY3Rpb24gPSBjdXJyUmVmID09PSBcIkFMTFwiOyAvLyBzZWxlY3Rpb24gaXMgZnVsbCBzZXF1ZW5jZVxuICAgICAgY29uc3QgaGl0RnVsbFNlbGVjdGlvbiA9ICFmdWxsU2VsZWN0aW9uICYmIHRoaXMuZnVsbFNlbGVjdGlvbkxlbmd0aCA+PSBzZXFMZW5ndGg7IC8vIHNlbGVjdGlvbiBiZWNhbWUgZnVsbCBzZXF1ZW5jZVxuICAgICAgaWYgKHNhbWVEaXJlY3Rpb25EcmFnICYmIGhpdEZ1bGxTZWxlY3Rpb24pIHtcbiAgICAgICAgZW5kID0gc3RhcnQ7XG4gICAgICB9IGVsc2UgaWYgKGZ1bGxTZWxlY3Rpb24pIHtcbiAgICAgICAgLy8gdGhpcyBlbnN1cmVzIHRoYXQgYmFja3RyYWNraW5nIGRvZXNuJ3QgcmVxdWlyZSBtYWtpbmcgdXAgdG8geW91ciBvdmVyc2hvb3QgZm9yd2FyZCBjaXJjbGVzXG4gICAgICAgIHRoaXMuZnVsbFNlbGVjdGlvbkxlbmd0aCA9IHNlcUxlbmd0aCArICh0aGlzLmZ1bGxTZWxlY3Rpb25MZW5ndGggJSBzZXFMZW5ndGgpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhc2FtZURpcmVjdGlvbkRyYWcgJiYgLy8gY2hhbmdlZCBkaXJlY3Rpb25cbiAgICAgICAgICBjaGVjayA9PT0gdGhpcy5mdWxsU2VsZWN0aW9uTGVuZ3RoIC0gc2VxTGVuZ3RoICYmIC8vIGJhY2sgdHJhY2tpbmdcbiAgICAgICAgICBjaGVjayA+IHNlcUxlbmd0aCAqIDAuOSAvLyBwYXNzZWQgc2VsZWN0aW9uIHN0YXJ0XG4gICAgICAgICkge1xuICAgICAgICAgIGVuZCA9IGN1cnJCYXNlOyAvLyBzdGFydCBkZWNyZWFzaW5nIHNlbGVjdGlvbiBzaXplIGR1ZSB0byBiYWNrdHJhY2tpbmdcblxuICAgICAgICAgIC8vIHJlc2V0IGNhbGN1bGF0ZWQgYWRkaXRpdmUgc2VsZWN0aW9uIGxlbmd0aCB0byBub3JtYWwgbm93IHRoYXQgd2UgYXJlIG5vdCBhdCBBTEwgbGVuZ3RoXG4gICAgICAgICAgdGhpcy5mdWxsU2VsZWN0aW9uTGVuZ3RoID0gdGhpcy5mdWxsU2VsZWN0aW9uTGVuZ3RoIC0gc2VxTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbmQgPSBjdXJyQmFzZTsgLy8gbm90aGluZyBzcGVjaWFsIGp1c3QgdXBkYXRlIHRoZSBzZWxlY3Rpb25cbiAgICAgIH1cbiAgICAgIHRoaXMuc2hpZnRTZWxlY3Rpb24gPSBmYWxzZTtcblxuICAgICAgdGhpcy5zZXRTZWxlY3Rpb24oe1xuICAgICAgICAuLi5kZWZhdWx0U2VsZWN0aW9uLFxuICAgICAgICBjbG9ja3dpc2U6IGNsb2Nrd2lzZSxcbiAgICAgICAgZW5kOiBlbmQsXG4gICAgICAgIHN0YXJ0OiBzdGFydCxcbiAgICAgICAgdHlwZTogXCJTRVFcIixcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogaW4gYSBsaW5lYXIgc2VxdWVuY2Ugdmlld2VyLCBnaXZlbiB0aGUgYm91bmRpbmcgYm94IG9mIGEgY29tcG9uZW50LCB0aGUgYmFzZXBhaXJzXG4gICAqIGJ5IFNlcUJsb2NrIGFuZCB0aGUgcG9zaXRpb24gb2YgdGhlIG1vdXNlIGV2ZW50LCBmaW5kIHRoZSBjdXJyZW50IGJhc2VcbiAgICovXG4gIGNhbGN1bGF0ZUJhc2VMaW5lYXIgPSAoZTogU2VxVml6TW91c2VFdmVudCwga25vd25SYW5nZTogeyBlbmQ6IG51bWJlcjsgc3RhcnQ6IG51bWJlciB9KSA9PiB7XG4gICAgY29uc3QgeyBicHNQZXJCbG9jayB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IGJsb2NrID0gZS5jdXJyZW50VGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IGRpc3RGcm9tTGVmdDogbnVtYmVyID0gZS5jbGllbnRYIC0gYmxvY2subGVmdDtcbiAgICBjb25zdCByYXRpb0Zyb21MZWZ0ID0gZGlzdEZyb21MZWZ0IC8gYmxvY2sud2lkdGg7XG4gICAgY29uc3QgYnBzRnJvbUxlZnQgPSBNYXRoLnJvdW5kKHJhdGlvRnJvbUxlZnQgKiAoYnBzUGVyQmxvY2sgYXMgbnVtYmVyKSk7XG5cbiAgICByZXR1cm4gTWF0aC5taW4oa25vd25SYW5nZS5zdGFydCArIGJwc0Zyb21MZWZ0LCBrbm93blJhbmdlLmVuZCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIGluIGEgY2lyY3VsYXIgcGxhc21pZCB2aWV3ZXIsIGdpdmVuIHRoZSBjZW50ZXIgb2YgdGhlIHZpZXdlciwgYW5kIHBvc2l0aW9uIG9mIHRoZVxuICAgKiBtb3VzZSBldmVudCwgZmluZCB0aGUgY3VycmVudGx5IGhvdmVyZWQgb3IgY2xpY2tlZCBiYXNlcGFpclxuICAgKi9cbiAgY2FsY3VsYXRlQmFzZUNpcmN1bGFyID0gKGU6IFNlcVZpek1vdXNlRXZlbnQpID0+IHtcbiAgICBjb25zdCB7IGNlbnRlciwgY2VudHJhbEluZGV4LCBzZXEsIHlEaWZmIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKCFjZW50ZXIpIHJldHVybiAwO1xuXG4gICAgY29uc3QgYmxvY2sgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAvLyBwb3NpdGlvbiBvbiB0aGUgcGxhc21pZCB2aWV3ZXJcbiAgICBjb25zdCBkaXN0RnJvbUxlZnQgPSBlLmNsaWVudFggLSBibG9jay5sZWZ0O1xuICAgIGNvbnN0IGRpc3RGcm9tVG9wID0gZS5jbGllbnRZIC0gYmxvY2sudG9wO1xuXG4gICAgLy8gcG9zaXRpb24gcmVsYXRpdmUgdG8gY2VudGVyXG4gICAgY29uc3QgeCA9IGRpc3RGcm9tTGVmdCAtIGNlbnRlci54O1xuICAgIGNvbnN0IHkgPSBkaXN0RnJvbVRvcCAtIChjZW50ZXIueSArICh5RGlmZiBhcyBudW1iZXIpKTtcblxuICAgIGNvbnN0IHJpc2VUb1J1biA9IHkgLyB4O1xuICAgIGNvbnN0IHBvc0luUmFkcyA9IE1hdGguYXRhbihyaXNlVG9SdW4pO1xuICAgIGxldCBwb3NJbkRlZyA9IHBvc0luUmFkcyAqICgxODAgLyBNYXRoLlBJKSArIDkwOyAvLyBjb252ZXJ0IGFuZCBzaGlmdCB0byB2ZXJ0aWNhbCBpcyAwXG4gICAgaWYgKHggPCAwKSB7XG4gICAgICBwb3NJbkRlZyArPSAxODA7IC8vIGxlZnQgaGFsZiBvZiB0aGUgdmlld2VyXG4gICAgfVxuICAgIGNvbnN0IHBvc0luUGVyYyA9IHBvc0luRGVnIC8gMzYwOyAvLyBwb3NpdGlvbiBhcyBhIHBlcmNlbnRhZ2VcblxuICAgIGxldCBjdXJyQmFzZSA9IE1hdGgucm91bmQoc2VxLmxlbmd0aCAqIHBvc0luUGVyYyk7IC8vIGFjY291bnQgZm9yIHJvdGF0aW9uIG9mIHRoZSB2aWV3ZXJcbiAgICBjdXJyQmFzZSArPSBjZW50cmFsSW5kZXggYXMgbnVtYmVyO1xuICAgIGlmIChjdXJyQmFzZSA+IHNlcS5sZW5ndGgpIHtcbiAgICAgIGN1cnJCYXNlIC09IHNlcS5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiBjdXJyQmFzZTtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSBzZWxlY3Rpb24gaW4gc3RhdGUuIE9ubHkgdXBkYXRlIHRoZSBzcGVjaWZpZWRcbiAgICogcHJvcGVydGllcyBvZiB0aGUgc2VsZWN0aW9uIHRoYXQgc2hvdWxkIGJlIHVwZGF0ZWQuXG4gICAqL1xuICBzZXRTZWxlY3Rpb24gPSAobmV3U2VsZWN0aW9uOiBTZWxlY3Rpb24pID0+IHtcbiAgICBjb25zdCBzZWxlY3Rpb24gPSB0aGlzLmNvbnRleHQ7XG4gICAgY29uc3QgeyBzZXRTZWxlY3Rpb24gfSA9IHRoaXMucHJvcHM7XG5cbiAgICBpZiAoXG4gICAgICBuZXdTZWxlY3Rpb24uc3RhcnQgPT09IHNlbGVjdGlvbi5zdGFydCAmJlxuICAgICAgbmV3U2VsZWN0aW9uLmVuZCA9PT0gc2VsZWN0aW9uLmVuZCAmJlxuICAgICAgbmV3U2VsZWN0aW9uLnJlZiA9PT0gc2VsZWN0aW9uLnJlZiAmJlxuICAgICAgLy8gdG8gc3VwcG9ydCByZS1jbGlja2luZyB0aGUgYW5ub3RhdGlvbiBhbmQgY2F1c2luZyBpdCB0byBmaXJlIGEgbGEgZ2ggaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL0xhdHRpY2UtQXV0b21hdGlvbi9zZXF2aXovaXNzdWVzLzE0MlxuICAgICAgW1wiU0VRXCIsIFwiQU1JTk9BQ0lEXCIsIFwiXCJdLmluY2x1ZGVzKG5ld1NlbGVjdGlvbi50eXBlIHx8IFwiXCIpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHsgY2xvY2t3aXNlLCBlbmQsIG5hbWUsIHJlZiwgc3RhcnQsIHR5cGUgfTogYW55ID0ge1xuICAgICAgLi4uc2VsZWN0aW9uLFxuICAgICAgLi4ubmV3U2VsZWN0aW9uLFxuICAgIH07XG5cbiAgICBjb25zdCBsZW5ndGggPSB0aGlzLmNhbGNTZWxlY3Rpb25MZW5ndGgoc3RhcnQsIGVuZCwgY2xvY2t3aXNlKTtcblxuICAgIHNldFNlbGVjdGlvbih7XG4gICAgICBjbG9ja3dpc2UsXG4gICAgICBlbmQsXG4gICAgICBsZW5ndGgsXG4gICAgICBuYW1lLFxuICAgICAgcmVmLFxuICAgICAgc3RhcnQsXG4gICAgICB0eXBlLFxuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVjayB3aGF0IHRoZSBsZW5ndGggb2YgdGhlIHNlbGVjdGlvbiBpcyBpbiBjaXJjbGUgZHJhZyBzZWxlY3RcbiAgICovXG4gIGNhbGNTZWxlY3Rpb25MZW5ndGggPSAoc3RhcnQ6IG51bWJlciwgYmFzZTogbnVtYmVyLCBjbG9jazogYm9vbGVhbiB8IG51bGwpID0+IHtcbiAgICBjb25zdCB7IHNlcSB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAoYmFzZSA8IHN0YXJ0ICYmICFjbG9jaykge1xuICAgICAgcmV0dXJuIHN0YXJ0IC0gYmFzZTtcbiAgICB9XG4gICAgaWYgKGJhc2UgPiBzdGFydCAmJiAhY2xvY2spIHtcbiAgICAgIHJldHVybiBzdGFydCArIChzZXEubGVuZ3RoIC0gYmFzZSk7XG4gICAgfVxuICAgIGlmIChiYXNlID4gc3RhcnQgJiYgY2xvY2spIHtcbiAgICAgIHJldHVybiBiYXNlIC0gc3RhcnQ7XG4gICAgfVxuICAgIGlmIChiYXNlIDwgc3RhcnQgJiYgY2xvY2spIHtcbiAgICAgIHJldHVybiBzZXEubGVuZ3RoIC0gc3RhcnQgKyBiYXNlO1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICByZW5kZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMuY2hpbGRyZW4odGhpcy5pbnB1dFJlZiwgdGhpcy5tb3VzZUV2ZW50LCB0aGlzLnJlbW92ZU1vdW50ZWRCbG9jayk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsIlNlbGVjdGlvbkNvbnRleHQiLCJkZWZhdWx0U2VsZWN0aW9uIiwiU2VsZWN0aW9uSGFuZGxlciIsInN0YXRlIiwicHJldmlvdXNCYXNlIiwiZm9yd2FyZCIsImZ1bGxTZWxlY3Rpb25MZW5ndGgiLCJkcmFnRXZlbnQiLCJzZWxlY3Rpb25TdGFydGVkIiwic2hpZnRTZWxlY3Rpb24iLCJsYXN0Q2xpY2siLCJEYXRlIiwibm93IiwiaWRUb1JhbmdlIiwiTWFwIiwiY29tcG9uZW50RGlkTW91bnQiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdG9wRHJhZyIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlc2V0Q2lyY2xlRHJhZ1ZhcnMiLCJzdGFydCIsImlucHV0UmVmIiwicmVmIiwic2VsZWN0UmFuZ2UiLCJzZXQiLCJyZW1vdmVNb3VudGVkQmxvY2siLCJkZWxldGUiLCJtb3VzZUV2ZW50IiwiZSIsInNldENlbnRyYWxJbmRleCIsInByb3BzIiwidHlwZSIsIm1zU2luY2VMYXN0Q2xpY2siLCJrbm93blJhbmdlIiwiZ2V0IiwiY3VycmVudFRhcmdldCIsImlkIiwidGFyZ2V0IiwiZW5kIiwiZGlyZWN0aW9uIiwidmlld2VyIiwiY2xvY2t3aXNlIiwic2VsZWN0aW9uU3RhcnQiLCJzZWxlY3Rpb25FbmQiLCJzZXRTZWxlY3Rpb24iLCJwYXJlbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJoYW5kbGVMaW5lYXJTZXFFdmVudCIsImhhbmRsZUNpcmN1bGFyU2VxRXZlbnQiLCJzZWxlY3Rpb24iLCJjb250ZXh0IiwiY3VyckJhc2UiLCJjYWxjdWxhdGVCYXNlTGluZWFyIiwiY2xvY2t3aXNlRHJhZyIsImJ1dHRvbiIsInNoaWZ0S2V5Iiwic2VxIiwiY2FsY3VsYXRlQmFzZUNpcmN1bGFyIiwic2VxTGVuZ3RoIiwibGVuZ3RoIiwic2VsU3RhcnQiLCJsb29rYWhlYWQiLCJjYWxjU2VsZWN0aW9uTGVuZ3RoIiwiaW5jcmVhc2VkIiwiY2hhbmdlVGhyZXNob2xkIiwiY2hhbmdlIiwiTWF0aCIsImFicyIsImNyb3NzZWRaZXJvIiwibGVuZ3RoQ2hhbmdlIiwic2FtZURpcmVjdGlvbk1vdmUiLCJjaGVjayIsInNhbWVEaXJlY3Rpb25EcmFnIiwiZnVsbFNlbGVjdGlvbiIsImhpdEZ1bGxTZWxlY3Rpb24iLCJicHNQZXJCbG9jayIsImJsb2NrIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZGlzdEZyb21MZWZ0IiwiY2xpZW50WCIsImxlZnQiLCJyYXRpb0Zyb21MZWZ0Iiwid2lkdGgiLCJicHNGcm9tTGVmdCIsInJvdW5kIiwibWluIiwiY2VudGVyIiwiY2VudHJhbEluZGV4IiwieURpZmYiLCJkaXN0RnJvbVRvcCIsImNsaWVudFkiLCJ0b3AiLCJ4IiwieSIsInJpc2VUb1J1biIsInBvc0luUmFkcyIsImF0YW4iLCJwb3NJbkRlZyIsIlBJIiwicG9zSW5QZXJjIiwibmV3U2VsZWN0aW9uIiwiaW5jbHVkZXMiLCJuYW1lIiwiYmFzZSIsImNsb2NrIiwicmVuZGVyIiwiY2hpbGRyZW4iLCJQdXJlQ29tcG9uZW50IiwiZGlzcGxheU5hbWUiLCJjb250ZXh0VHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../src/SelectionHandler.tsx\n"));

/***/ })

});